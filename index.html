<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Android Speech by gotev</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Android Speech</h1>
        <h2>Android speech recognition and text to speech made easy</h2>
        <a href="https://github.com/gotev/android-speech" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p><a href="https://travis-ci.org/gotev/android-speech"><img src="https://travis-ci.org/gotev/android-speech.svg?branch=master" alt="Build Status"></a> <a href="https://bintray.com/gotev/maven/android-speech/_latestVersion"> <img src="https://api.bintray.com/packages/gotev/maven/android-speech/images/download.svg" alt="Download"> </a></p>

<h2>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup</h2>

<h3>
<a id="gradle" class="anchor" href="#gradle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Gradle</h3>

<pre><code>dependencies {
    compile 'net.gotev:speech:1.1.2'
}
</code></pre>

<h3>
<a id="maven" class="anchor" href="#maven" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Maven</h3>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;net.gotev&lt;/groupId&gt;
  &lt;artifactId&gt;speech&lt;/artifactId&gt;
  &lt;version&gt;1.1.2&lt;/version&gt;
  &lt;type&gt;aar&lt;/type&gt;
&lt;/dependency&gt;
</code></pre>

<h2>
<a id="initialization" class="anchor" href="#initialization" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Initialization</h2>

<p>To start using the library, you have to initialize it in your <a href="http://developer.android.com/reference/android/app/Application.html">Application subclass</a>:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Initializer</span> <span class="pl-k">extends</span> <span class="pl-e">Application</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onCreate</span>() {
        <span class="pl-v">super</span><span class="pl-k">.</span>onCreate();

        <span class="pl-smi">Speech</span><span class="pl-k">.</span>init(<span class="pl-v">this</span>);
    }
}</pre></div>

<h2>
<a id="logging" class="anchor" href="#logging" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Logging</h2>

<p>By default the library logging is disabled. You can enable debug log by invoking:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Logger</span><span class="pl-k">.</span>setLogLevel(<span class="pl-smi">LogLevel</span><span class="pl-c1"><span class="pl-k">.</span>DEBUG</span>);</pre></div>

<p>wherever you want in your code. You can adjust the level of detail from DEBUG to OFF.</p>

<p>The library logger uses <code>android.util.Log</code> by default, so you will get the output in <code>LogCat</code>. If you want to redirect logs to different output or use a different logger, you can provide your own delegate implementation like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Logger</span><span class="pl-k">.</span>setLoggerDelegate(<span class="pl-k">new</span> <span class="pl-smi">Logger</span>.<span class="pl-smi">LoggerDelegate</span>() {
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">error</span>(<span class="pl-smi">String</span> <span class="pl-v">tag</span>, <span class="pl-smi">String</span> <span class="pl-v">message</span>) {
        <span class="pl-c">//your own implementation here</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">error</span>(<span class="pl-smi">String</span> <span class="pl-v">tag</span>, <span class="pl-smi">String</span> <span class="pl-v">message</span>, <span class="pl-smi">Throwable</span> <span class="pl-v">exception</span>) {
        <span class="pl-c">//your own implementation here</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">debug</span>(<span class="pl-smi">String</span> <span class="pl-v">tag</span>, <span class="pl-smi">String</span> <span class="pl-v">message</span>) {
        <span class="pl-c">//your own implementation here</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">info</span>(<span class="pl-smi">String</span> <span class="pl-v">tag</span>, <span class="pl-smi">String</span> <span class="pl-v">message</span>) {
        <span class="pl-c">//your own implementation here</span>
    }
});</pre></div>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<p>You can find a fully working demo app which uses this library in the <code>examples</code> directory. Just checkout the project and give it a try.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a id="speech-recognition" class="anchor" href="#speech-recognition" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Speech recognition</h3>

<p>Inside an activity:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">try</span> {
    <span class="pl-c">// you must have android.permission.RECORD_AUDIO granted at this point</span>
    <span class="pl-smi">Speech</span><span class="pl-k">.</span>getInstance()<span class="pl-k">.</span>startListening(<span class="pl-k">new</span> <span class="pl-smi">SpeechDelegate</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onStartOfSpeech</span>() {
            <span class="pl-smi">Log</span><span class="pl-k">.</span>i(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>speech recognition is now active<span class="pl-pds">"</span></span>);
        }

        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onSpeechRmsChanged</span>(<span class="pl-k">float</span> <span class="pl-v">value</span>) {
            <span class="pl-smi">Log</span><span class="pl-k">.</span>d(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>rms is now: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> value);
        }

        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onSpeechPartialResults</span>(<span class="pl-k">List&lt;<span class="pl-smi">String</span>&gt;</span> <span class="pl-v">results</span>) {
            <span class="pl-smi">StringBuilder</span> str <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">StringBuilder</span>();
            <span class="pl-k">for</span> (<span class="pl-smi">String</span> res <span class="pl-k">:</span> results) {
                str<span class="pl-k">.</span>append(res)<span class="pl-k">.</span>append(<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>);
            }

            <span class="pl-smi">Log</span><span class="pl-k">.</span>i(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>partial result: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> str<span class="pl-k">.</span>toString()<span class="pl-k">.</span>trim());
        }

        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onSpeechResult</span>(<span class="pl-smi">String</span> <span class="pl-v">result</span>) {
            <span class="pl-smi">Log</span><span class="pl-k">.</span>i(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>result: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> result);
        }
    });
} <span class="pl-k">catch</span> (<span class="pl-smi">SpeechRecognitionNotAvailable</span> exc) {
    <span class="pl-smi">Log</span><span class="pl-k">.</span>e(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Speech recognition is not available on this device!<span class="pl-pds">"</span></span>);
    <span class="pl-c">// You can prompt the user if he wants to install Google App to have</span>
    <span class="pl-c">// speech recognition, and then you can simply call:</span>
    <span class="pl-c">//</span>
    <span class="pl-c">// SpeechUtil.redirectUserToGoogleAppOnPlayStore(this);</span>
    <span class="pl-c">//</span>
    <span class="pl-c">// to redirect the user to the Google App page on Play Store</span>
}</pre></div>

<h3>
<a id="display-progress-animation" class="anchor" href="#display-progress-animation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Display progress animation</h3>

<p>Add this to your layout:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">LinearLayout</span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">orientation</span>=<span class="pl-s"><span class="pl-pds">"</span>vertical<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_width</span>=<span class="pl-s"><span class="pl-pds">"</span>wrap_content<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_height</span>=<span class="pl-s"><span class="pl-pds">"</span>wrap_content<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>@+id/linearLayout<span class="pl-pds">"</span></span>&gt;

    &lt;<span class="pl-ent">net</span>.gotev.speech.ui.SpeechProgressView
        <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>@+id/progress<span class="pl-pds">"</span></span>
        <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_width</span>=<span class="pl-s"><span class="pl-pds">"</span>120dp<span class="pl-pds">"</span></span>
        <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_height</span>=<span class="pl-s"><span class="pl-pds">"</span>150dp<span class="pl-pds">"</span></span>/&gt;

&lt;/<span class="pl-ent">LinearLayout</span>&gt;</pre></div>

<p>It's important that the <code>SpeechProgressView</code> is always inside a LinearLayout to function properly. You can adjust width and height accordingly to the bar height settings (see below).</p>

<p>then, when you start speech recognition, pass also the <code>SpeechProgressView</code>:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Speech</span><span class="pl-k">.</span>getInstance()<span class="pl-k">.</span>startListening(speechProgressView, speechDelegate);</pre></div>

<h4>
<a id="set-custom-bar-colors" class="anchor" href="#set-custom-bar-colors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Set custom bar colors</h4>

<p>You can set all the 5 bar colors as you wish. This is just an example:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">int</span>[] colors <span class="pl-k">=</span> {
        <span class="pl-smi">ContextCompat</span><span class="pl-k">.</span>getColor(<span class="pl-v">this</span>, <span class="pl-smi">android<span class="pl-k">.</span>R</span><span class="pl-k">.</span>color<span class="pl-k">.</span>black),
        <span class="pl-smi">ContextCompat</span><span class="pl-k">.</span>getColor(<span class="pl-v">this</span>, <span class="pl-smi">android<span class="pl-k">.</span>R</span><span class="pl-k">.</span>color<span class="pl-k">.</span>darker_gray),
        <span class="pl-smi">ContextCompat</span><span class="pl-k">.</span>getColor(<span class="pl-v">this</span>, <span class="pl-smi">android<span class="pl-k">.</span>R</span><span class="pl-k">.</span>color<span class="pl-k">.</span>black),
        <span class="pl-smi">ContextCompat</span><span class="pl-k">.</span>getColor(<span class="pl-v">this</span>, <span class="pl-smi">android<span class="pl-k">.</span>R</span><span class="pl-k">.</span>color<span class="pl-k">.</span>holo_orange_dark),
        <span class="pl-smi">ContextCompat</span><span class="pl-k">.</span>getColor(<span class="pl-v">this</span>, <span class="pl-smi">android<span class="pl-k">.</span>R</span><span class="pl-k">.</span>color<span class="pl-k">.</span>holo_red_dark)
};
speechProgressView<span class="pl-k">.</span>setColors(colors);</pre></div>

<h4>
<a id="set-custom-maximum-bar-height" class="anchor" href="#set-custom-maximum-bar-height" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Set custom maximum bar height</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">int</span>[] heights <span class="pl-k">=</span> {<span class="pl-c1">60</span>, <span class="pl-c1">76</span>, <span class="pl-c1">58</span>, <span class="pl-c1">80</span>, <span class="pl-c1">55</span>};
speechProgressView<span class="pl-k">.</span>setBarMaxHeightsInDp(heights);</pre></div>

<h3>
<a id="text-to-speech" class="anchor" href="#text-to-speech" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Text to speech</h3>

<p>Inside an activity:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Speech</span><span class="pl-k">.</span>getInstance()<span class="pl-k">.</span>say(<span class="pl-s"><span class="pl-pds">"</span>say something<span class="pl-pds">"</span></span>);</pre></div>

<p>You can also provide a callback to receive status:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Speech</span><span class="pl-k">.</span>getInstance()<span class="pl-k">.</span>say(<span class="pl-s"><span class="pl-pds">"</span>say something<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">TextToSpeechCallback</span>() {
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onStart</span>() {
        <span class="pl-smi">Log</span><span class="pl-k">.</span>i(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>speech started<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onCompleted</span>() {
        <span class="pl-smi">Log</span><span class="pl-k">.</span>i(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>speech completed<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onError</span>() {
        <span class="pl-smi">Log</span><span class="pl-k">.</span>i(<span class="pl-s"><span class="pl-pds">"</span>speech<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>speech error<span class="pl-pds">"</span></span>);
    }
});</pre></div>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>

<p>You can configure various parameters by using the setter methods on the speech instance, which you can get like this anywhere in your code:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Speech</span><span class="pl-k">.</span>getInstance()</pre></div>

<p>Refer to JavaDocs for a complete reference.</p>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Credits</h2>

<p>Thanks to <a href="https://github.com/zagum" class="user-mention">@zagum</a> for the original implementation of the <a href="https://github.com/zagum/SpeechRecognitionView">speech recognition view</a>.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<pre><code>Copyright (C) 2016 Aleksandar Gotev

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/gotev/android-speech/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/gotev/android-speech/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/gotev/android-speech"></a> is maintained by <a href="https://github.com/gotev">gotev</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
